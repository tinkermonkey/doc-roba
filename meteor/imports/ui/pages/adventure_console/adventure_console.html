<template name="AdventureConsole">
  {{#NoMenuLayout}}
    {{#if ready}}
      {{debug this}}
      {{setTitle "Adventure Console" }}
      
      {{#with getFullContext}}
        <div class="fluid-container full-page adventure">
          <div class="adventure-main-view">
            {{> AdventureScreen }}
          </div>
          <div class="adventure-sidebar" style="height: {{relativeHeight 1.0}}px;">
            {{#RobaAccordionGroup}}
              {{> AdventureStatusBar }}
              
              {{#RobaAccordion display=true sticky=true name="adventure-map" title="Map" icon="glyphicon glyphicon-map-marker"}}
                {{> AdventureMap }}
              {{/RobaAccordion}}
              {{#RobaAccordion name="adventure-route" title="Route" icon="glyphicon glyphicon-picture"}}
                {{> AdventureRoute adventure }}
              {{/RobaAccordion}}
              {{#RobaAccordion name="current-node" title="Current Location" icon="glyphicon glyphicon-pencil" cssClass="accordion-grey"}}
                {{> AdventureContext }}
              {{/RobaAccordion}}
              {{#RobaAccordion name="current-actions" title="Current Location Actions" icon="glyphicon glyphicon-pencil" cssClass="accordion-grey"}}
                {{> AdventureEditNodeActions getCurrentNode }}
              {{/RobaAccordion}}
              {{#unless adventureIsComplete}}
                {{#RobaAccordion name="command-console" title="Command Console" icon="glyphicon glyphicon-play"}}
                  {{> AdventureCommandEditor }}
                {{/RobaAccordion}}
              {{/unless}}
              {{#RobaAccordion name="command-history" title="Command History" icon="glyphicon glyphicon-list"}}
                {{> AdventureCommandHistory }}
              {{/RobaAccordion}}
            {{/RobaAccordionGroup}}
          </div>
        </div>
      {{/with}}
    {{else}}
      {{> RobaSpinner }}
    {{/if}}
  {{/NoMenuLayout}}
</template>