<template name="TestResultStep">
  <tr class="test-result-step">
    <td class="test-result-step-body {{getStepClass}}" data-step-id="{{step._id}}">
      <div class="test-result-step-body-content">
        <div class="test-result-step-title-rotate">
          <div class="test-result-step-title-text">{{renderLookup "TestCaseStepTypesLookup" step.type}}</div>
        </div>
        <div>
          <div class="test-result-role-map-spacer">
            {{> TestResultRoleMap steps=getResultSteps testResultRole=../..}}
          </div>
        </div>
        <div><!-- needed to isolate the block display screenshots container -->
          <div class="test-result-screenshots">
            <div style="position: absolute">
            {{#each screenshots}}
              {{#if isImage store='thumbs'}}
                <div class="test-result-screenshot-container" style="bottom: {{getScreenshotBottom}}px;">
                  <img src="{{url store='thumbs'}}" class="test-result-screenshot">
                  <div class="test-result-screenshot-title">{{renderCamelCaseAsWords key}}</div>
                </div>
              {{/if}}
            {{/each}}
            </div>
          </div>
        </div>
        <div class="test-result-detail-reveal test-result-detail-1-reveal">
          <span class="glyphicon glyphicon-arrow-right"></span>
        </div>
        <div class="test-result-detail-1" style="display: none;">
          {{> Template.dynamic template=getStepTemplate }}
        </div>
        <div class="test-result-detail-reveal test-result-detail-2-reveal" style="display: none;">
          <span class="glyphicon glyphicon-arrow-right"></span>
        </div>
        <div class="test-result-detail-2" style="display: none;">
          {{> TestResultStepLog getStepLogMessages }}
        </div>
        <div class="test-result-body-sponge"></div>
      </div>
    </td>
  </tr>
</template>