<template name="TestResult">
  {{#contentFor "title"}}
    Test Result: {{testCase.title}}
  {{/contentFor}}

  {{#contentFor "svgDefs"}}
    {{> svg_def "outer-glow" }}
    {{> svg_def "shadow" }}
    {{> svg_def "crisp-shadow" }}
    {{> svg_def "node-clip-path" }}
    {{> svg_def "node-hover" }}
    {{> svg_def "action-arrow" }}
    {{> svg_def "action-arrow-hover" }}
  {{/contentFor}}

  {{#contentFor "header"}}
    {{> ProjectNav }}
  {{/contentFor}}

  {{#contentFor "nav"}}
    {{> TestResultNav }}
  {{/contentFor}}

  {{#if Template.subscriptionsReady}}
    <h2>
      <div>
        Test Result: <a href="/test_case_dashboard/{{projectId}}/{{projectVersionId}}/?testCaseId={{testCase._id}}">{{testCase.title}}</a>
        {{#if notNull resultCode}}
          ( <span class="test-result-{{resultCode}}">{{renderLookup "TestResultCodesLookup" resultCode}}</span> )
        {{/if}}
      </div>
      <small>
        {{dateFormat dateCreated "ddd MMM Do, YYYY @ h:mm:ss A"}}
        against {{server.title}},
        {{#unless isDone}}currently{{/unless}} {{renderLookup "TestResultStatusLookup" status}}
        {{#if abort}}(aborted){{/if}}
      </small>
    </h2>

    {{#CenterPoleSectionHeader}}<h2>Test Log</h2>{{/CenterPoleSectionHeader}}

    <div class="no-wrap flex">
      {{#each roleResults}}
        {{> TestResultRole }}
      {{/each}}
    </div>

    {{#CenterPoleSectionHeader}}<h2>Analysis</h2>{{/CenterPoleSectionHeader}}
  {{else}}
    {{> CustomSpinner }}
  {{/if}}
</template>