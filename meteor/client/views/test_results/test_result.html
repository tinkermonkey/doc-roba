<template name="TestResult">
  {{#contentFor "title"}}
    Test Result: {{testCase.title}}
  {{/contentFor}}

  {{#contentFor "svgDefs"}}
    {{> svg_def "outer-glow" }}
    {{> svg_def "shadow" }}
    {{> svg_def "crisp-shadow" }}
    {{> svg_def "node-clip-path" }}
    {{> svg_def "node-hover" }}
    {{> svg_def "action-arrow" }}
    {{> svg_def "action-arrow-hover" }}
  {{/contentFor}}

  {{#contentFor "header"}}
    {{> ProjectNav }}
  {{/contentFor}}

  {{#contentFor "nav"}}
    {{> TestResultNav }}
  {{/contentFor}}

  {{#if Template.subscriptionsReady}}
    <h1>
      Test Result
      <small>
        <a href="/test_case_dashboard/{{projectId}}/{{projectVersionId}}/?testCaseId={{testCase._id}}">{{testCase.title}}</a>
        {{#if notNull resultCode}}
          ({{renderLookup "TestResultCodesLookup" resultCode}})
        {{/if}}
      </small>
    </h1>
    <h4>
      {{dateFormat dateCreated "ddd MMM Do, YYYY @ h:mm:ss A"}}
      against {{server.title}},
      {{#unless isDone}}currently{{/unless}} {{renderLookup "TestResultStatusLookup" status}}
      {{#if abort}}(aborted){{/if}}
    </h4>

    <h2>Test Log</h2>

    <div class="no-wrap flex">
      {{#each roleResults}}
        {{> TestResultRole }}
      {{/each}}
    </div>

    <h2>Test Analysis</h2>
  {{else}}
    {{> CustomSpinner }}
  {{/if}}
</template>